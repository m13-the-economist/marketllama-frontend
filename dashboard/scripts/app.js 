// app.js â€” layout bootstrap ONLY
(() => {
  'use strict';

  if (window.__ML_APP_READY__) return;
  window.__ML_APP_READY__ = true;

  document.addEventListener('DOMContentLoaded', async () => {
    await loadLayout();
    document.dispatchEvent(new Event('ml:app-ready'));
  });

  async function loadLayout() {
    await Promise.all([
      injectComponent('navbar', '/dashboard/components/navbar.html'),
      injectComponent('footer', '/dashboard/components/footer.html')
    ]);
  }

  async function injectComponent(id, url) {
    const host = document.getElementById(id);
    if (!host) return;
    const res = await fetch(url, { cache: 'no-store' });
    host.innerHTML = await res.text();
  }
})();